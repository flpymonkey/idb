var features=function(){"use strict";function n(n){return function(t){return t==n}}function t(n){return function(t){return s(t)(n)}}var r=n;n.fn=function(n){return"function"==typeof n},n.str=function(n){return"string"==typeof n},n.num=function(n){return"number"==typeof n},n.obj=function(n){return"object"==typeof n},n.lit=function(n){return"object"==typeof n&&!(n instanceof Array)},n.bol=function(n){return"boolean"==typeof n},n.truthy=function(n){return 1==!!n},n.falsy=function(n){return 0==!!n},n.arr=function(n){return n instanceof Array},n.null=function(n){return null===n},n.def=function(n){return void 0!==n},n.in=function(n){return function(t){return!!n&&(n.indexOf?~n.indexOf(t):t in n)}},n.promise=function(n){return n instanceof Promise},n.stream=function(n){return!(!n||!n.next)};var e={arr:function(n){return Array.prototype.slice.call(n,0)},obj:function(n){function t(n,t,o){return 0===o&&(n={}),n[r.fn(e)?e(t,o):t[e]]=t,n}var e="id";return 1==arguments.length?(e=n,t):t.apply(this,arguments)}},o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u="undefined"!=typeof window,i=u?window:o,f=function(n){return function(t){return t&&t.indexOf&&~t.indexOf(n)}},a=function(n){return function(){return n}},c=function(n){return 0===n?"0":n?r.fn(n)?""+n:r.obj(n)?JSON.stringify(n):String(n):""},s=function n(t,e){var o=arguments.length>1,u=r.fn(t)?[]:c(t).split("."),i=u.shift();return function(f,c){var s={};return f?r.num(t)||t?r.arr(t)?(t.map(function(t){var e=n(t)(f);void 0!=e&&n(t,r.fn(e)?a(e):e)(s)}),s):f[t]||!u.length?o?(f[t]=r.fn(e)?e(f[t],c):e,f):r.fn(t)?t(f):f[t]:o?(n(u.join("."),e)(f[i]?f[i]:f[i]={}),f):n(u.join("."))(f[i]):f:void 0}},l=function(n,t){var r=1==arguments.length;return function(e){return e&&e.headers?r?s(n)(e.headers):s(n)(e.headers)==t:null}},d=function(n){return function(t){return t+n}},p=function n(t,e){var o=arguments.length;return r.str(t)||2!=o?r.str(t)||3!=o?function(n){var u=this||{};return n=u.nodeName||r.fn(u.node)?u:n,n=n.node?n.node():n,n=n.host||n,o>1&&!1===e?n.removeAttribute(t):o>1?(n.setAttribute(t,e),e):n.attributes.getNamedItem(t)&&n.attributes.getNamedItem(t).value}:n(arguments[1],arguments[2]).call(this,arguments[0]):n(arguments[1]).call(this,arguments[0])},y=function(n){return n.__data__},h=t;t.parent=function(n){return y(this.parentNode)[n]};var v=function(n){return function(){return!n.apply(this,arguments)}},g=function(n,t){var e=1==arguments.length;return function(o){var u=r.fn(n)?n(o):s(n)(o);return u&&t&&u.toLowerCase&&t.toLowerCase?u.toLowerCase()===t.toLowerCase():e?Boolean(u):r.fn(t)?t(u):u==t}},m=function(n){return function(t){return function(e){var o=c(p(e,"is")).split(" ").map(h(n.resources)).filter(l("content-type","application/javascript")),u=c(p("css")(e)).split(" ");o.filter(g("headers.needs",f("[css]"))).map(s("name")).map(d(".css")).filter(v(r.in(u))).map(function(n){return p("css",(c(p("css")(e))+" "+n).trim())(e)});var i=t(e);return i&&i.state?(o.map(s("body")).map(function(n){return n.call(i.shadowRoot||i,i.shadowRoot||i,i.state)}),i):void 0}}},b=function(n){return function(t){if(!i.console||!console.log.apply)return t;r.arr(arguments[2])&&(arguments[2]=arguments[2].length);var o=e.arr(arguments),u="[log]["+(new Date).toISOString()+"]"+n;return o.unshift(u.grey?u.grey:u),console.log.apply(console,o),t}}("[ri/features]");return function(n){if(u)return b("creating"),n.render=m(n)(n.render),n}}();
