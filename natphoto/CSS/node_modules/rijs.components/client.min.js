var components=function(){"use strict";function n(n){return function(t){return t==n}}function t(n){return function(t){return l(t)(n)}}var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=n;n.fn=function(n){return"function"==typeof n},n.str=function(n){return"string"==typeof n},n.num=function(n){return"number"==typeof n},n.obj=function(n){return"object"==typeof n},n.lit=function(n){return"object"==typeof n&&!(n instanceof Array)},n.bol=function(n){return"boolean"==typeof n},n.truthy=function(n){return 1==!!n},n.falsy=function(n){return 0==!!n},n.arr=function(n){return n instanceof Array},n.null=function(n){return null===n},n.def=function(n){return void 0!==n},n.in=function(n){return function(t){return!!n&&(n.indexOf?~n.indexOf(t):t in n)}},n.promise=function(n){return n instanceof Promise},n.stream=function(n){return!(!n||!n.next)};var o=function(n){return Object.keys(r.obj(n)||r.fn(n)?n:{})},u=function(n,t){return function(e){return t[e]=n[e],e}},i=function(n){return function(t){return o(t).map(u(t,n)),n}},a=function(n){return function(t){return t&&t.indexOf&&~t.indexOf(n)}},c="undefined"!=typeof window,f=function(n){return n.__data__},s=function(n){return function(){return n}},d=function(n){return 0===n?"0":n?r.fn(n)?""+n:r.obj(n)?JSON.stringify(n):String(n):""},l=function n(t,e){var o=arguments.length>1,u=r.fn(t)?[]:d(t).split("."),i=u.shift();return function(a,c){var f={};return a?r.num(t)||t?r.arr(t)?(t.map(function(t){var e=n(t)(a);void 0!=e&&n(t,r.fn(e)?s(e):e)(f)}),f):a[t]||!u.length?o?(a[t]=r.fn(e)?e(a[t],c):e,a):r.fn(t)?t(a):a[t]:o?(n(u.join("."),e)(a[i]?a[i]:a[i]={}),a):n(u.join("."))(a[i]):a:void 0}},p=t;t.parent=function(n){return f(this.parentNode)[n]};var m=function(n){return n?o(n).map(p(n)):[]},h=function(n){return document.body?n():document.addEventListener("DOMContentLoaded",n.bind(this))},y=function n(t,e){var o=arguments.length;return r.str(t)||2!=o?r.str(t)||3!=o?function(n){var u=this||{};return n=u.nodeName||r.fn(u.node)?u:n,n=n.node?n.node():n,n=n.host||n,o>1&&!1===e?n.removeAttribute(t):o>1?(n.setAttribute(t,e),e):n.attributes.getNamedItem(t)&&n.attributes.getNamedItem(t).value}:n(arguments[1],arguments[2]).call(this,arguments[0]):n(arguments[1]).call(this,arguments[0])},g=function(){},w={arr:function(n){return Array.prototype.slice.call(n,0)},obj:function(n){function t(n,t,o){return 0===o&&(n={}),n[r.fn(e)?e(t,o):t[e]]=t,n}var e="id";return 1==arguments.length?(e=n,t):t.apply(this,arguments)}},v=function(n,t){var e=!t&&document.head.createShadowRoot?"html /deep/ ":"";return w.arr((t||document).querySelectorAll(e+n))},b=function(n,t){var e=1==arguments.length;return function(o){var u=r.fn(n)?n(o):l(n)(o);return u&&t&&u.toLowerCase&&t.toLowerCase?u.toLowerCase()===t.toLowerCase():e?Boolean(u):r.fn(t)?t(u):u==t}},N=function(n){return(n||"").toLowerCase()},_=c?window:e,j=function(n){return function(t){if(!_.console||!console.log.apply)return t;r.arr(arguments[2])&&(arguments[2]=arguments[2].length);var e=w.arr(arguments),o="[log]["+(new Date).toISOString()+"]"+n;return e.unshift(o.grey?o.grey:o),console.log.apply(console,e),t}},x=function(n){return function(t){if(!_.console||!console.error.apply)return t;r.arr(arguments[2])&&(arguments[2]=arguments[2].length);var e=w.arr(arguments),o="[err]["+(new Date).toISOString()+"]"+n;return e.unshift(o.red?o.red:o),console.error.apply(console,e),t}};return function(n,t){return t={exports:{}},n(t,t.exports),t.exports}(function(n){function t(n){return function(t){return this&&this.nodeName?s(n)(this):this&&this.node?s(n)(this.node()):t?t instanceof S?s(n)(t.target):t[0]instanceof S?s(n)(t[0].target):t.nodeName?s(n)(t):t.node?s(n)(t.node()):t.name?u(n)(t.name):r.str(t)?u(n)(t):O("could not update",t):o(n)}}n.exports=function(n){return c?(_("creating"),n.draw=Node.prototype.draw=t(n),n.render=d(n),n.on("change.draw",n.draw),h(e(n)),n):n};var e=function(n){return function(){return v("*").filter(b("nodeName",a("-"))).map(n.draw)}},o=function(n){var t=m(n.resources).map(function(t){return(n.types[t.headers["content-type"]].selector||g)(t)}).join(",");return v(t||null).map(s(n))},u=function(n){return function(t){var e=n.resources[t],r=e.headers["content-type"];return v((n.types[r].selector||g)(e)).map(s(n))}},f=function(n){return function(t){t.pending||(t.pending=[],requestAnimationFrame(function(){t.changes=t.pending,delete t.pending,n.render(t)})),n.change&&t.pending.push(n.change[1])}},s=function(n){return function(t){if(a("-")(t.nodeName)){if("#document-fragment"==t.nodeName)return s(n)(t.host);if("#text"==t.nodeName)return s(n)(t.parentNode);if(t.matches(A)&&null==y(t,"inert"))return f(n)(t),t}}},d=function(n){return function(t){var e=t.shadowRoot||t,r=y(t,"data"),o=p(n)(r),u=w(n)(N(t.tagName)),i=u&&u.prototype&&u.prototype.render;if(!u)return t;if(r&&!o)return t;if(i&&e.class!=u)return Object.getOwnPropertyNames((e.class=u).prototype).map(function(n){return e[n]=u.prototype[n].bind(e)}),Promise.resolve((e.init||g).call(e,e,e.state=e.state||{})).then(function(){return n.draw(e.initialised=e)}),t;if(!i||e.initialised){try{(e.render||u).call(e,e,l(t,o))}catch(n){O(n,n.stack)}return t}}},l=function(n,t){return n.state=n.state||{},i(n.state)(t),i(n.state)(n.__data__),n.__data__=n.state,n.state},p=function(n){return function(t){var e={},o=t?t.split(" "):[];return o.map(function(t){return e[t]=w(n)(t)}),o.length?m(e).some(r.falsy)?void 0:e:void 0}},w=function(n){return function(t){return n.resources[t]&&n.resources[t].body}},_=j("[ri/components]"),O=x("[ri/components]"),S=c&&window.MutationRecord||g,A=c&&!!window.document.registerElement?"html *, :host-context(html) *":"html *";c&&(window.Element.prototype.matches=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector)})}();
