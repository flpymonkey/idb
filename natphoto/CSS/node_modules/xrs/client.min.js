var xrs=function(){"use strict";function n(n,e){return e={exports:{}},n(e,e.exports),e.exports}function e(n){return function(e){return e==n}}function t(n){return function(e){return _(e)(n)}}var r=function(){var n,e,t=new Promise(function(t,r){n=t,e=r});return arguments.length&&n(arguments[0]),t.resolve=n,t.reject=e,t},o=function n(e,t){return t instanceof Array&&(t=t.reduce(n,[])),(e=e||[]).concat(t)},i=function(n,e){return e in n},u=function(n,e,t,r){return n.host&&n.host.nodeName&&(n=n.host),e.name&&(t=e,e=e.name),!i(n,e)&&Object.defineProperty(n,e,{value:t,writable:r}),n[e]},c=function n(e){function t(n,t){return n.next?n.next(t):t instanceof Array?n.apply(e,t):n.call(e,t)}function i(n,e){for(var t=n.length;~--t;)e!=n[t]&&e!=n[t].fn&&e||n.splice(t,1)}function c(e,t){var o=n((t=t||{}).base||r());return o.i=0,o.li=[],o.fn=t.fn,o.parent=e,o.source=t.fn?o.parent.source:o,o.on("stop",function(){return o.type?o.parent.off(o.type,o):o.parent.off(o)}),o.each=function(n){var e=n.next?n:c(o,{fn:n});return o.li.push(e),e},o.pipe=function(n){return n(o)},o.map=function(n){return o.each(function(e,t,r){return r.next(n(e,t,r))})},o.filter=function(n){return o.each(function(e,t,r){return n(e,t,r)&&r.next(e)})},o.reduce=function(n,e){return o.each(function(t,r,o){return o.next(e=n(e,t,r,o))})},o.unpromise=function(){var n=c(o,{base:{},fn:function(e){return n.next(e)}});return o.li.push(n),n},o.next=function(n){return o.resolve&&o.resolve(n),o.li.length?o.li.map(function(e){return e.fn(n,e.i++,e)}):n},o.until=function(n){return n.each(function(){o.source.emit("stop")}),o},o.off=function(n){return i(o.li,n),o},o[Symbol.asyncIterator]=function(){return{next:()=>o.wait=new Promise(n=>{o.wait=!0,o.map((e,t,r)=>{delete o.wait,o.off(r),n({value:e,done:!1})}),o.emit("pull",o)})}},o}return e=e||{},u(e,"emit",function(n,r,i){for(var u=e.on[n.split(".")[0]]||[],c=[],f=0;f<u.length;f++)u[f].ns&&i&&!i(u[f].ns)||c.push(t(u[f].isOnce?u.splice(f--,1)[0]:u[f],r));for(f=0;f<e.on["*"].length;f++)c.push(t(e.on["*"][f],[n,r]));return c.reduce(o,[])},1),u(e,"once",function(n,t){return e.on(n,t,!0)},1),u(e,"off",function(n,t){return i(e.on[n]||[],t),t&&t.ns&&delete e.on[n]["$"+t.ns],e},1),u(e,"on",function(n,t,r){function o(n){return n.isOnce=r,n.type=u,f&&(e.on[u]["$"+(n.ns=f)]=n),a.push(n),n.next?n:e}var u=n.split(".")[0],f=n.split(".")[1],a=e.on[u]=e.on[u]||[],s="function"==typeof t?t:0;return!s&&f?(s=e.on[u]["$"+f])?s:o(c(e,t)):s||f?s&&f?o((i(a,e.on[u]["$"+f]||-1),s)):!(!s||f)&&o(s):o(c(e,t))},1),e.on["*"]=e.on["*"]||[],e},f=function(n=location.href.replace("http","ws")){const e=c({attempt:0});return e.ready=e.once("connected"),e.connect=p(e,n),e.connect(),e.send=(n=>e.ready.then(e=>e.send(n))),e};const{min:a,pow:s}=Math,p=(n,e)=>()=>{const{WebSocket:t,location:r,setTimeout:o}=window,i=new t(e);i.onopen=(()=>n.emit("connected",i)),i.onmessage=(e=>n.emit("recv",e.data)),i.onclose=(()=>{n.ready=n.once("connected"),n.emit("disconnected"),o(n.connect,l(++n.attempt))})},l=(n,e=100,t=1e4)=>a(t,e*s(2,n));var d=function(){var n,e,t=new Promise(function(t,r){n=t,e=r});return arguments.length&&n(arguments[0]),t.resolve=n,t.reject=e,t},m=function n(e,t){return t instanceof Array&&(t=t.reduce(n,[])),(e=e||[]).concat(t)},v=function(n,e){return e in n},h=function(n,e,t,r){return n.host&&n.host.nodeName&&(n=n.host),e.name&&(t=e,e=e.name),!v(n,e)&&Object.defineProperty(n,e,{value:t,writable:r}),n[e]},y=function n(e){function t(n,t){return n.next?n.next(t):t instanceof Array?n.apply(e,t):n.call(e,t)}function r(n,e){for(var t=n.length;~--t;)e!=n[t]&&e!=n[t].fn&&e||n.splice(t,1)}function o(e,t){var i=n((t=t||{}).base||d());return i.i=0,i.li=[],i.fn=t.fn,i.parent=e,i.source=t.fn?i.parent.source:i,i.on("stop",function(){return i.type?i.parent.off(i.type,i):i.parent.off(i)}),i.each=function(n){var e=n.next?n:o(i,{fn:n});return i.li.push(e),e},i.pipe=function(n){return n(i)},i.map=function(n){return i.each(function(e,t,r){return r.next(n(e,t,r))})},i.filter=function(n){return i.each(function(e,t,r){return n(e,t,r)&&r.next(e)})},i.reduce=function(n,e){return i.each(function(t,r,o){return o.next(e=n(e,t,r,o))})},i.unpromise=function(){var n=o(i,{base:{},fn:function(e){return n.next(e)}});return i.li.push(n),n},i.next=function(n){return i.resolve&&i.resolve(n),i.li.length?i.li.map(function(e){return e.fn(n,e.i++,e)}):n},i.until=function(n){return n.each(function(){i.source.emit("stop")}),i},i.off=function(n){return r(i.li,n),i},i[Symbol.asyncIterator]=function(){return{next:()=>i.wait=new Promise(n=>{i.wait=!0,i.map((e,t,r)=>{delete i.wait,i.off(r),n({value:e,done:!1})}),i.emit("pull",i)})}},i}return e=e||{},h(e,"emit",function(n,r,o){for(var i=e.on[n.split(".")[0]]||[],u=[],c=0;c<i.length;c++)i[c].ns&&o&&!o(i[c].ns)||u.push(t(i[c].isOnce?i.splice(c--,1)[0]:i[c],r));for(c=0;c<e.on["*"].length;c++)u.push(t(e.on["*"][c],[n,r]));return u.reduce(m,[])},1),h(e,"once",function(n,t){return e.on(n,t,!0)},1),h(e,"off",function(n,t){return r(e.on[n]||[],t),t&&t.ns&&delete e.on[n]["$"+t.ns],e},1),h(e,"on",function(n,t,i){function u(n){return n.isOnce=i,n.type=c,f&&(e.on[c]["$"+(n.ns=f)]=n),a.push(n),n.next?n:e}var c=n.split(".")[0],f=n.split(".")[1],a=e.on[c]=e.on[c]||[],s="function"==typeof t?t:0;return!s&&f?(s=e.on[c]["$"+f])?s:u(o(e,t)):s||f?s&&f?u((r(a,e.on[c]["$"+f]||-1),s)):!(!s||f)&&u(s):u(o(e,t))},1),e.on["*"]=e.on["*"]||[],e},x=e;e.fn=function(n){return"function"==typeof n},e.str=function(n){return"string"==typeof n},e.num=function(n){return"number"==typeof n},e.obj=function(n){return"object"==typeof n},e.lit=function(n){return"object"==typeof n&&!(n instanceof Array)},e.bol=function(n){return"boolean"==typeof n},e.truthy=function(n){return 1==!!n},e.falsy=function(n){return 0==!!n},e.arr=function(n){return n instanceof Array},e.null=function(n){return null===n},e.def=function(n){return void 0!==n},e.in=function(n){return function(e){return!!n&&(n.indexOf?~n.indexOf(e):e in n)}},e.promise=function(n){return n instanceof Promise},e.stream=function(n){return!(!n||!n.next)};var g=function(n){return Object.keys(x.obj(n)||x.fn(n)?n:{})},O=function(n){return n.__data__},b=function(n){return function(){return n}},w=function(n){return 0===n?"0":n?x.fn(n)?""+n:x.obj(n)?JSON.stringify(n):String(n):""},_=function n(e,t){var r=arguments.length>1,o=x.fn(e)?[]:w(e).split("."),i=o.shift();return function(u,c){var f={};return u?x.num(e)||e?x.arr(e)?(e.map(function(e){var t=n(e)(u);void 0!=t&&n(e,x.fn(t)?b(t):t)(f)}),f):u[e]||!o.length?r?(u[e]=x.fn(t)?t(u[e],c):t,u):x.fn(e)?e(u):u[e]:r?(n(o.join("."),t)(u[i]?u[i]:u[i]={}),u):n(o.join("."))(u[i]):u:void 0}},j=t;t.parent=function(n){return O(this.parentNode)[n]};var $=function(n){return n?g(n).map(j(n)):[]},N=n(function(n){!function(){function e(n){return"object"==typeof n?null===n?"null":n&&1===n.nodeType?"dom":n instanceof Array?"array":n instanceof Date?"date":"object":typeof n}function t(n){var e=arguments.length;if(e<2||null==n)return n;for(var t=1;t<e;t++)for(var r=arguments[t],o=Object.keys(r),i=o.length,u=0;u<i;u++){var c=o[u];void 0===n[c]&&(n[c]=r[c])}return n}function r(n,t,o,c){o.prepare&&o.prepare(n),c=c||[];var f=e(n);if(-1!==s.indexOf(f)){var a=c.indexOf(n);if(-1===a){var l={};c[a=t.push({contents:l,value:u(n)})-1]=n;for(var d in n)o.isSerializable(n,d)&&(l[d]=r(n[d],t,o,c))}return p+a}return i(n)}function o(n,e,t,r){if(r=r||[],a(n,p)){var i=parseInt(n.slice(p.length),10);if(!r.hasOwnProperty(i)){var u=e[i],s=c(u.value),l=u.contents;r[i]=s;for(var d in l)s[d]=o(l[d],e,t,r)}return t.finalize&&t.finalize(r[i]),r[i]}return t.finalize&&t.finalize(n),f(n)}function i(n){var t=e(n);if("undefined"===t)return m;if("function"===t)return d+n.toString();if("date"===t)return v+n.getTime();if(n===1/0)return l;if("dom"!==t)return n}function u(n){var t=e(n);return"function"===t||"date"===t?i(n):"object"===t?h:"array"===t?y:n}function c(n){if("string"===e(n)){if(n===m)return;if(a(n,d))return new Function("return "+n.slice(d.length))();if(a(n,v)){var t=parseInt(n.slice(v.length),10);return new Date(t)}if(a(n,h))return{};if(a(n,y))return[];if(n===l)return 1/0}return n}function f(n){if("string"===e(n)){if(n===m)return;if(a(n,d)){var t=n.slice(d.length),r=t.indexOf("(")+1,o=t.indexOf(")",r),i=t.slice(r,o),u=t.indexOf("{")+1,c=t.lastIndexOf("}")-1,f=t.slice(u,c);return new Function(i,f)}if(a(n,v)){var s=parseInt(n.slice(v.length),10);return new Date(s)}if(n===l)return 1/0}return n}function a(n,t){return"string"===e(n)&&n.slice(0,t.length)===t}var s="object array date function".split(" "),p="_CRYO_REF_",l="_CRYO_INFINITY_",d="_CRYO_FUNCTION_",m="_CRYO_UNDEFINED_",v="_CRYO_DATE_",h="_CRYO_OBJECT_",y="_CRYO_ARRAY_",x={stringify:function(n,e){var o=[],i=r(n,o,e=t((e="function"==typeof e?{prepare:e}:e)||{},{prepare:null,isSerializable:function(n,e){return n.hasOwnProperty(e)}}));return JSON.stringify({root:i,references:o})},parse:function(n,e){var r=JSON.parse(n);return e="function"==typeof e?{finalize:e}:e,e=t(e||{},{finalize:null}),o(r.root,r.references,e)}},g=this;n.exports?n.exports=x:g.Cryo=x}()});return n(function(n){n.exports=function({socket:n=f()}={}){return n.id=0,n.once("disconnected").map(()=>n.on("connected").map(t(n))),n.on("recv").map(n=>r(n)).each(({id:e,data:t})=>t.exec?t.exec(n.on[`$${e}`]&&n.on[`$${e}`][0],t.value):n.emit(`$${e}`,t)),Object.defineProperty(o(n),"subscriptions",{get:()=>e(n)})};const e=n=>$(n.on).map(n=>n&&n[0]).filter(n=>n&&n.type&&"$"==n.type[0]),t=n=>()=>e(n).map(n=>n.type).map(e=>n.send(n.on[e][0].subscription)),{parse:r}=N,o=(n,e)=>(t,r)=>{if(t instanceof window.Blob)return i(n,t,r);const u=w(++n.id),c=n.on(`$${u}`),f=(t,r=0)=>n.send(c.source.subscription=w({id:u,data:t,type:e})).then(()=>c.emit("sent",{id:u,count:r}));return t.next?t.map(f).source.emit("start"):f(t),c.source.once("stop").filter(n=>"CLOSED"!=n).map(()=>o(n,"UNSUBSCRIBE")(u).filter((n,e,t)=>t.source.emit("stop","CLOSED"))),c},i=(n,e,t,r=0,i=1024)=>{const u=y().on("recv"),c=t=>()=>r>=e.size?u.emit("sent",{id:t}):(n.send(e.slice(r,r+=i)),window.setTimeout(c(t)));return o(n,"BINARY")({size:e.size,meta:t}).on("sent",({id:n})=>c(n)()).on("progress",n=>u.emit("progress",{received:n,total:e.size})).map(u.next).source.until(u.once("stop")),u}})}();
