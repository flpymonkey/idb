var offline=function(){"use strict";function n(n){return function(r){return r==n}}function r(n){return function(r){return f(r)(n)}}function t(){console.groupCollapsed=console.groupEnd=function(n){(console.log||b)("*****",n,"*****")}}var e=n;n.fn=function(n){return"function"==typeof n},n.str=function(n){return"string"==typeof n},n.num=function(n){return"number"==typeof n},n.obj=function(n){return"object"==typeof n},n.lit=function(n){return"object"==typeof n&&!(n instanceof Array)},n.bol=function(n){return"boolean"==typeof n},n.truthy=function(n){return 1==!!n},n.falsy=function(n){return 0==!!n},n.arr=function(n){return n instanceof Array},n.null=function(n){return null===n},n.def=function(n){return void 0!==n},n.in=function(n){return function(r){return!!n&&(n.indexOf?~n.indexOf(r):r in n)}},n.promise=function(n){return n instanceof Promise},n.stream=function(n){return!(!n||!n.next)};var o=function(n){function r(n){return function(){var r=this,e=arguments;t&&clearTimeout(t),t=setTimeout(function(){n.apply(r,e)},o)}}var t,o=e.num(n)?n:100;return e.fn(n)?r(n):r},u=function(n){return function(){return n}},i=function(n){return 0===n?"0":n?e.fn(n)?""+n:e.obj(n)?JSON.stringify(n):String(n):""},f=function n(r,t){var o=arguments.length>1,f=e.fn(r)?[]:i(r).split("."),c=f.shift();return function(i,a){var l={};return i?e.num(r)||r?e.arr(r)?(r.map(function(r){var t=n(r)(i);void 0!=t&&n(r,e.fn(t)?u(t):t)(l)}),l):i[r]||!f.length?o?(i[r]=e.fn(t)?t(i[r],a):t,i):e.fn(r)?r(i):i[r]:o?(n(f.join("."),t)(i[c]?i[c]:i[c]={}),i):n(f.join("."))(i[c]):i:void 0}},c=function(n,r){var t=1==arguments.length;return function(e){return e&&e.headers?t?f(n)(e.headers):f(n)(e.headers)==r:null}},a="undefined"!=typeof window,l=function(n){return Object.keys(e.obj(n)||e.fn(n)?n:{})},s=function(n){return n.__data__},p=r;r.parent=function(n){return s(this.parentNode)[n]};var d=function(n){return n?l(n).map(p(n)):[]},g=function(n){return n&&JSON.parse(n)},y=function(n){return e.fn(n)||e.str(n)?n:g(i(n))},h="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},v=a?window:h,b=function(){},m=function(n,r){if(!v.console)return r();console.groupCollapsed||t(),console.groupCollapsed(n);var e=r();return console.groupEnd(n),e},w=function(n){return function(){return!n.apply(this,arguments)}},j={arr:function(n){return Array.prototype.slice.call(n,0)},obj:function(n){function r(n,r,o){return 0===o&&(n={}),n[e.fn(t)?t(r,o):r[t]]=r,n}var t="id";return 1==arguments.length?(t=n,r):r.apply(this,arguments)}},S=function(n){return m("loading cache",function(){return(g(localStorage.ripple)||[]).map(n)})},O=function(n){return function(){_("cached");var r=d(y(n.resources)).filter(w(c("cache","no-store")));r.filter(c("content-type","application/javascript")).map(function(r){return r.body=i(n.resources[r.name].body)}),localStorage.ripple=i(r)}},_=function(n){return function(r){if(!v.console||!console.log.apply)return r;e.arr(arguments[2])&&(arguments[2]=arguments[2].length);var t=j.arr(arguments),o="[log]["+(new Date).toISOString()+"]"+n;return t.unshift(o.grey?o.grey:o),console.log.apply(console,t),r}}("[ri/offline]");return function(n){if(a&&window.localStorage)return _("creating"),S(n),n.on("change.cache",o(1e3)(O(n))),n}}();
